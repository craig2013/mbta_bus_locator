<div class="predictions-header">
	<h1>Commuter Rail Predictions</h1>
</div>
<div class="commuter-rail-predictions">
	<a href="#" class="show-map-link">Show Map</a>
	<a href="#" class="hide-map-link">Hide Map</a>
	<% if ( predictions !== null ) { %>
	<% //console.log(predictions); %>
		<% if ( Array.isArray(predictions) ) { %>
			<% _.each(predictions, function(p, i) { %>
				<% if ( Array.isArray(p.direction) ) { %>
					<% _.each(p.direction, function(d, j) { %>
						<% if ( d.direction_name.toLowerCase() === Backbone.app.defaults.direction ) { %>
							<% if ( Array.isArray(d.trip) ) { %>
								<% _.each(d.trip, function(t, k) { %>
									<% if ( i === 0 ) { %>
										<div class="next-vehicle">
									<% } else { %>
										<div class="later-vehicle">
									<% } %>
									<%  if ( convertTime(t.pre_away) > 1 ) { %>
										<% if (t.length === 1) { %>
											Your next train will arive in 
											<%= convertTime(t.pre_away) %> min.
										<% } else { %>
											<%= convertTime(t.pre_away) %> min
										<% } %>
									<% } else if ((convertTime(t.pre_away) === 1) && (k===0)) { %>
										Your train is arriving.
									<% } else if ((convertTime(t.pre_away) === 0) && (k===0)) { %>
										Your train is boarding.
									<% } %>										
									</div>
								<% }); %>
							<% } %>
						<% } %>
					<% }); %>
				<% } %>
			<% }); %>
		<% } %>
	<% } else if ( (predictions === null) && (typeof alert === "string") ) { %>
		<h2><%= alert %></h2>
	<% } %>	
</div>